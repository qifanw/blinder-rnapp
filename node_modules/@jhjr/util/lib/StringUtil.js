/**
 * 字符串处理工具类
 * @constructor
 * @example
 * // 获取工具对象
 * var StringUtil = require('@jhjr/util').stringUtil;
 */
var StringUtil = function(){};

/**
 * 将参数拼接到url后，返回新的url
 * @param   {String}  url     拼接参数前的url
 * @param   {Object}  params  需要被拼接的参数字典
 * @return  {String}          拼接参数后的url
 */
StringUtil.buildUrlWithParams = function(url, params) {
  url = url || "";
  if (params) {
    for(var key in params) {
      if (url.indexOf('?') < 0) {
        // 如果 URI 组件中含有分隔符(;/?:@&=+$,#等)，则应当使用 encodeURIComponent() 而不是encodeURI方法分别对各组件进行编码。 ;/?:@&=+$,#
        url += ('?' + key + '=' + encodeURIComponent(params[key]));
      } else {
        url += ('&' + key + '=' + encodeURIComponent(params[key]));
      }
    }
  }
  return url;
};

/**
 * 将字符串的某一段替换为*
 * @param {String} text    替换前的字符串
 * @param {Number} start   替换的起始位置
 * @param {Number} end     替换的结束位置
 * @returns {String} 替换后的字符串
 */
StringUtil.replaceByStar = function (text, start, end) {
  text += "";
  if (!text) {
    return '--';
  }
  start = start < 0 ? 0 : start;
  start = start >= text.length ? text.length - 1 : start;
  end = end < 0 ? 0 : end;
  end = end >= text.length ? text.length - 1 : end;
  var pre = text.substr(0, start);
  var after = text.substr(end);
  var middle = text.substr(0, end - start).replace(/[0-9]/g, '*');
  return pre + middle + after;
};

module.exports = exports = StringUtil;